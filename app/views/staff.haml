#new-staff{:style => "display: none; width: 600px; text-align: center"}
  
  %b{:style => 'font-size: 24px; text-align: center;background: #eee; display: block; margin: -10px -10px 0px -10px; padding: 5px'} New staff
  %form.newstaffform{:style => "margin-right: 150px; text-align: right; font-size: 16px"}
    %p
      %label{:style => "font-weight: bold"} Existing User? (autocomplete?)
      %select{:style => "width: 177px; margin-left: 20px", :name => "existing"}
        %option{:value => ""}
        -Jumper.all.find_all{|j| !j.is_staff}.each do |jumper|
          %option{:value => jumper.id}= jumper.name
    %p.bold
      %label Name
      %input{:type => "text", :size => "12", :name => "first_name", :style => "margin-left: 20px"}
      %input{:type => "text", :size => "12", :name => "last_name", :style => "margin-left: 0px"}
    %p
      %label{:style => "font-weight: bold"} Nickname
      %input{:type => "text", :size => "30", :name => "nickname", :style => "margin-left: 20px"}
    %br
    %p
      %label{:style => "font-weight: bold"} Password
      %input{:type => "text", :size => "30", :name => "password", :style => "margin-left: 20px"}
    %br
    %p
      %label Address
      %input{:type => "text", :size => "30", :name => "address", :style => "margin-left: 20px"}
    %p
      %label City
      %input{:type => "text", :size => "30", :name => "city", :style => "margin-left: 20px"}
    %p
      %label State
      %select{:style => "width: 177px; margin-left: 20px", :name => "state"}
        %option{:value => "AL"} AL - Alabama
        %option{:value => "AK"} AK - Alaska
        %option{:value => "AK"} AZ - Arizona
        %option{:value => "AK"} AR - Arkansas
        %option{:value => "AK"} CA - California
        %option{:value => "AK"} CO - Colorado
        %option{:value => "AK"} CT - Connecticut
        %option{:value => "AK"} DE - Delaware
        %option{:value => "AK"} FL - Florida
        %option{:value => "AK"} GA - Georgia
        %option{:value => "AK"} HI - Hawaii
        %option{:value => "AK"} ID - Idaho
        %option{:value => "AK"} IL - Illinois
        %option{:value => "AK"} IN - Indiana
        %option{:value => "AK"} IA - Iowa
        %option{:value => "AK"} KS - Kansas
        %option{:value => "AK"} KY - Kentucky
        %option{:value => "AK"} LA - Louisiana
        %option{:value => "AK"} ME - Maine
        %option{:value => "AK"} MD - Maryland
        %option{:value => "AK"} MA - Massachusetts
        %option{:value => "AK"} MI - Michigan
        %option{:value => "AK"} MN - Minnesota
        %option{:value => "AK"} MS - Mississippi
        %option{:value => "AK"} MO - Missouri
        %option{:value => "AK"} MT - Montana
        %option{:value => "AK"} NE - Nebraska
        %option{:value => "AK"} NV - Nevada
        %option{:value => "AK"} NH - New Hampshire
        %option{:value => "AK"} NJ - New Jersey
        %option{:value => "AK"} NM - New Mexico
        %option{:value => "AK"} NY - New York
        %option{:value => "AK"} NC - North Carolina
        %option{:value => "AK"} ND - North Dakota
        %option{:value => "AK"} OH - Ohio
        %option{:value => "AK"} OK - Oklahoma
        %option{:value => "AK"} OR - Oregon
        %option{:value => "AK"} PA - Pennsylvania
        %option{:value => "AK"} RI - Rhode Island
        %option{:value => "AK"} SC - South Carolina
        %option{:value => "AK"} SD - South Dakota
        %option{:value => "AK"} TN - Tennessee
        %option{:value => "AK"} TX - Texas
        %option{:value => "AK"} UT - Utah
        %option{:value => "AK"} VT - Vermont
        %option{:value => "AK"} VA - Virginia
        %option{:value => "AK"} WA - Washington
        %option{:value => "AK"} WV - West Virginia
        %option{:value => "AK"} WI - Wisconsin
        %option{:value => "AK"} WY - Wyoming
        %option Other
    %p
      %label ZIP Code
      %input{:type => "text", :size => "30", :name => "zip", :style => "margin-left: 20px"}
    %p
      %label Country
      %input{:type => "text", :size => "30", :name => "country", :style => "margin-left: 20px"}
    %br
    %p
      %input{:type => "checkbox", :style => "margin-right: 10px;", :name => "pilot", :checked => "checked"}
      %label{:style => "font-weight: bold; margin-right: 135px"} Pilot
    %p
      %input{:type => "checkbox", :style => "margin-right: 10px;", :name => "tandem_instructor", :checked => "checked"}
      %label{:style => "font-weight: bold; margin-right: 36px"} Tandem Instructor
    %p
      %input{:type => "checkbox", :style => "margin-right: 10px;", :name => "aff_instructor", :checked => "checked"}
      %label{:style => "font-weight: bold; margin-right: 68px"} AFF Instructor
    %p
      %input{:type => "checkbox", :style => "margin-right: 10px;", :name => "videographer", :checked => "checked"}
      %label{:style => "font-weight: bold; margin-right: 70px"} Videographer 
    %br
    %br
    %b View &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Edit &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    
    %p
      %label{:style => "font-weight: bold;"} Jumper Data
      %input{:type => "checkbox", :style => "margin-left: 68px; margin-right: 70px;", :name => "can_view_jumpers", :checked => "checked"}
      %input{:type => "checkbox", :style => "margin-right: 30px;", :name => "can_edit_jumpers", :checked => "checked"}

    %p
      %label{:style => "font-weight: bold;"} Manifest Data
      %input{:type => "checkbox", :style => "margin-left: 68px; margin-right: 70px;", :name => "can_view_manifests", :checked => "checked"}
      %input{:type => "checkbox", :style => "margin-right: 30px;", :name => "can_edit_manifests", :checked => "checked"}
    %p
      %label{:style => "font-weight: bold;"} Financial Data
      %input{:type => "checkbox", :style => "margin-left: 68px; margin-right: 70px;", :name => "can_view_finances", :checked => "checked"}
      %input{:type => "checkbox", :style => "margin-right: 30px;", :name => "can_edit_finances", :checked => "checked"}

    %br
    .left{:style => "display: inline; margin-right: 12px"}        
      %a.awesome.giant.green{:href => "#create-staff", :onClick => "createStaff(this);"} Create Staff
    .left{:style => "display: inline;margin-right: -13px"}
      %a.awesome.medium.gray{:href => "#", :onClick => "$.facebox.close()"} Cancel
.box.box-100.altbox
  / .altbox for alternative box's color
  .boxin
    .header
      %h3 Staff
      %a.ico-plus{:href => "#new-staff", :rel => "facebox", :style => "margin-left: 5px"} &nbsp;
      / Action button in the header of the box
      %input.search{:type => "text", :size => "45", :style => "margin-left: 575px", :name => "staffsearch", :placeholder => "Filter Staff..."}
    .content
      %table{:cellspacing => "0"}
        %thead
          %tr
            %th{:style => "width: 8px", :rowspan => 2} &nbsp;
            %td{:rowspan => 2} <br/><br/>Name 
            %td.tc{:style => "width: 75px", :rowspan => 2} <br/><br/>Pilot
            %td.tc{:style => "width: 75px", :rowspan => 2} <br/>Tandem Instructor
            %td.tc{:style => "width: 75px", :rowspan => 2} <br/><br/>Videographer
            %td.tc{:style => "width: 75px", :rowspan => 2} <br/><br/>AFF Instructor
            
            %td.tc{:style => "width: 50px", :rowspan => 2} <br/><br/>Balance 
            %td.tc.bold{:colspan => 2} Jumpers
            %td.tc.bold{:colspan => 2} Manifest
            %td.tc.bold{:colspan => 2} Finance
            
          %tr
            %td.tc{:style => "width: 25px; padding-left: 10px"} View
            %td.tc{:style => "width: 25px"} Edit
            %td.tc{:style => "width: 25px"} View
            %td.tc{:style => "width: 25px"} Edit
            
            %td.tc{:style => "width: 25px"} View
            %td.tc{:style => "width: 25px"} Edit
            
        %tbody.striped
          -Jumper.all.find_all{|j| j.is_staff}.each_with_index do |staff, i|
            %tr{:class => ( i == 0 ? "first" : "")}
              %th.tc
                -if staff.available
                  %img.vtip{:title => "On click: Are You sure you want to check staff member out?", :src => "/css/img/available.png"}
                -else
                  %img.vtip{:title => "On click: Check staff member in?",:src => "/css/img/unavailable.png"}
              %td
                %a{:href => "#"}= staff.name
              %td.tc
                -if staff.pilot
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}
              %td.tc
                -if staff.tandem_instructor
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}
              %td.tc
                -if staff.videographer
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}
              %td.tc
                -if staff.aff_instructor
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}
              %td.tr
                -balance = staff.balance || 0
                
                %a.stat.vtip{:href => "#", :style => 'display: block; width: 50px; padding: 0; padding-right: 5px; margin: 0;margin-bottom: -5px; float: right', :title => "This doesn't make a lot of sense here, but I want to break up the two banks of permissions", :class => (balance >= 0 ? "green" : "red")}= "%5.2f" % balance
              %td.tr
                -if staff.can_view_jumpers
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}
              %td.tl
                -if staff.can_edit_jumpers
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}
              %td.tr
                -if staff.can_view_manifests
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}
              %td.tl
                -if staff.can_edit_manifests
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}
              %td.tr
                -if staff.can_view_finances
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}
              %td.tl
                -if staff.can_edit_finances
                  %a.black-dot.vtip{:title => "Click to switch. Pop a warning message."}
                -else
                  %a.no-dot.vtip{:title => "Click to switch. Pop a warning message."}


:javascript
  $(document).ready(function(){
    $('a[rel*=facebox]').facebox();
    $(".black-dot, .no-dot").click(function(){
      if ($(this).hasClass("no-dot")){
        $(this).removeClass("no-dot").addClass("black-dot");
      } else {
        $(this).removeClass("black-dot").addClass("no-dot");
      }
    });
  });
  function createStaff(button){
    var form_data = $('.newstaffform:last').serialize();  
    alert(form_data);  
    $.post(('/ajax/new-staff?'+form_data), function(data) {
      $.facebox.close();
      $('#staff').html(data);
    });
    return false;
  }
  function toggleAvailable(){
    box = $('.available')
    if (box.attr('checked')){
      $('.available').attr('checked', '');
    }else{
      $('.available').attr('checked', 'checked');
      
    }
  }
